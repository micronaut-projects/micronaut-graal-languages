<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>GraalPyModule (micronaut-graal-languages 1.0.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.micronaut.graal.graalpy.annotations, annotation type: GraalPyModule">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Optional&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-required-element-summary">Required</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.micronaut.graal.graalpy.annotations</a></div>
<h1 title="Annotation Interface GraalPyModule" class="title">Annotation Interface GraalPyModule</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@Introduction
@Bean
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">GraalPyModule</span></div>
<div class="block">An annotation for Micronaut Introduction Advice that implements this interface using
 the <a href="https://www.graalvm.org/python">GraalPy</a> Python implementation and the
 <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Value.html#target-type-mapping-heading">polyglot type mapping</a>.
 <p>
 <b>Global state</b>: there is a single shared <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context">polyglot Context</a>
 that the advice uses to import the Python modules
 annotated with <a href="GraalPyModule.html" title="annotation interface in io.micronaut.graal.graalpy.annotations"><code>GraalPyModule</code></a> and execute their Python code. If multiple <a href="GraalPyModule.html" title="annotation interface in io.micronaut.graal.graalpy.annotations"><code>GraalPyModule</code></a>
 annotations map to the same Python module, they will all delegate to the same underlying Python
 module object.
 <p>
 <b>Python configuration</b>: the default Python context configuration can be altered by
 implementing <a href="../GraalPyContextBuilderFactory.html" title="interface in io.micronaut.graal.graalpy"><code>GraalPyContextBuilderFactory</code></a>.
 <p>
 <b>Threading</b>: the Python modules exposed to Java using this annotation can be accessed from
 multiple threads in parallel. On the Python side different Java threads will appear as
 different <a href="https://docs.python.org/3/library/threading.html#module-threading">Python level threads</a>.
 <p>
 <b>Scalability</b>: for compatibility reasons, the Python engine internally serializes multithreaded execution
 of Python code using the <a href="https://docs.python.org/3/glossary.html#term-global-interpreter-lock">global
 interpreter lock</a> and therefore there is only one thread executing Python code at a time. (Note: individual
 threads take turns after fixed time quantum in a round-robin fashion).
 <p>
 If better utilization of multicore hardware is required, one can use multiple polyglot contexts.
 Each context represents an isolated self-contained Python engine and has its own "global"
 interpreter lock. The caveats are:
 <ul>
     <li>Native Python extensions, such as NumPy, are currently not supported in multi-context mode.</li>
     <li>Python polyglot contexts are not cheap to create and should be pooled.</li>
     <li>There are caveats when sharing Python objects between contexts. It is recommended
     to avoid this if possible. More <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowValueSharing(boolean)">details</a>.</li>
 </ul>
 <p>
 Currently, this Introduction Advice does not support multi-context execution, but users can
 implement it by hand using the Context APIs directly. We are collecting feedback and requirements
 to provide such features in the next versions.
 <p>
 <b>Deployment</b>: for the ease of installation and deployment of 3rd party Python packages
 as well as custom Python scripts or packages, it is recommended to use the GraalPy Maven
 plugin. The polyglot context is automatically configured to include the resources configured in
 the plugin.
 <p>
 <b>Example</b>: python module hello.py
 <pre>
 def hello(txt):
     return "hello " + txt
 </pre>

 <pre>
 &#064;GraalPyModuleBinding("hello")
 public interface Hello {
     String hello(String txt);
 }
 </pre>

 <pre>
 &#064;Inject
 public void inject(Hello hello) {
     hello.hello("python");
 }
 </pre></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE REQUIRED MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-required-element-summary">
<h2>Required Element Summary</h2>
<div class="caption"><span>Required Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Required Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#value()" class="member-name-link">value</a></code></div>
<div class="col-last even-row-color">
<div class="block">Name of the Python module to import.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="value()">
<h3>value</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">value</span></div>
<div class="block">Name of the Python module to import. This may be a relative or absolute import.
 In general, a valid value is anything that can follow after the <code>import</code> keyword
 in Python.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>name of Python module</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
